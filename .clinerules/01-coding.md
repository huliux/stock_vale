# 项目规范

## 文档规范

- 所有变更需同步更新cline_docs中的对应文档
- README.md需保持与当前版本功能一致
- 技术决策记录在cline_docs/systemPatterns.md

## 架构规范

- 采用MVC模式分层架构
- 数据获取层与业务逻辑层分离
- 报告生成使用工厂模式
- 错误处理统一使用utils/errors.py规范

## 代码规范

- 严格遵循PEP8编码规范
- 必须使用类型注解(Type Hints)
- 金融计算使用decimal模块
- 数据类统一使用dataclass
- 配置文件必须继承config.ini.example模板
- 禁止在代码中硬编码敏感信息

## 测试规范

- **使用 `pytest` 作为主要的测试框架。**
- 核心估值算法覆盖率需达到100%
- 数据获取模块需实现mock测试
- HTML报告需进行视觉回归测试
- 使用pytest-fixture管理测试数据
- 集成测试覆盖所有估值模型

## 安全规范

- **强烈推荐使用 `.env` 文件和 `python-dotenv` 库管理环境变量（如 API 密钥、数据库凭证）。`.env` 文件必须添加到 `.gitignore`。**
- 数据库连接信息必须使用环境变量（通过 `.env` 加载）
- 报告生成需过滤敏感字段
- API请求必须实现限流机制
- 日志文件不得记录敏感数据
