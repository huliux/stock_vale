# Cline 交互与工作流指南

本文档定义了与 Cline (AI 助手) 协作时推荐遵循的核心指南，旨在确保开发过程高效、一致，并充分利用 Cline 的能力。

## 1. 沟通与指令

*   **语言：** 优先使用简体中文 (zh-CN) 与 Cline 进行交流。
*   **指令清晰：** 向 Cline 发出的指令应清晰、明确、无歧义，尤其是在涉及文件修改、代码生成或执行命令时。
*   **模式切换：**
    *   **计划模式 (Plan Mode):** 用于需求分析、方案设计、任务拆解和讨论。在此模式下，与 Cline 充分沟通，共同制定详细的执行计划。
    *   **执行模式 (Act Mode):** 用于根据既定计划执行具体操作（如编码、文件操作、命令执行）。
    *   应明确告知 Cline 何时需要切换模式，或由用户直接操作模式切换。

## 2. 任务与上下文管理

*   **任务交接规范 (`new_task`):**
    *   严格监控 Cline 的上下文窗口使用率 (显示在环境详情中)。
    *   当上下文窗口使用率接近或超过 50% 时，Cline **必须** 主动提议使用 `new_task` 工具进行任务交接，以保证对话的连贯性和记忆的完整性。
    *   在自然的任务断点或阶段性完成后，也应考虑使用 `new_task` 进行交接，以便开始新的、集中的工作单元。
    *   任务交接时，Cline 需提供详尽的上下文总结，包括已完成工作、当前状态、后续步骤及关键参考信息。
    *   *(详细的任务交接内容规范参考 `.clinerules/02-new_task.md`，该文件是 Cline 必须遵守的内部操作指南)*
*   **记忆库 (`cline_docs/`) 的使用：**
    *   Cline 必须在每个新任务开始时，或按用户指示，查阅项目根目录下 `cline_docs/` 文件夹中的所有相关文档（如 `activeContext.md`, `systemPatterns.md`, `progress.md` 等）。
    *   在开发过程中，Cline 应协助用户及时更新这些文档，以反映最新的项目状态、决策和技术细节。

## 3. 业务逻辑的最终依据

*   **项目特定知识库优先：** 对于项目的业务逻辑、需求规格、数据定义等，应以项目自身的知识库（例如，项目仓库中的 `docs/` 或 `wiki/` 目录，或团队使用的Confluence/Notion空间等）作为最终和最高优先级的依据。
*   在与 Cline 沟通业务需求或指导其实现业务逻辑时，应优先引用这些项目特定的知识库文档。

## 4. 规则集的应用与维护

*   **规则库 (`clinerules-bank/`) 的使用：**
    *   `clinerules-bank/` 是一个通用规则的存储库，用户可以根据新项目的需求，从中挑选合适的规则模块，复制到新项目的 `.clinerules/` 目录中以激活它们。
*   **规则集回顾与更新触发：**
    *   用户可以在特定任务完成后（例如项目里程碑、主要功能上线后）指示 Cline 提醒回顾并更新 `clinerules-bank/`。
    *   当开始新项目或项目进入重要新阶段时，用户可以指示 Cline 协助检查当前 `.clinerules/` 配置的适用性，并评估 `clinerules-bank/` 是否需要基于近期经验进行更新。
    *   *(详细的规则集维护指南参考本文档同目录下的 `MW03_ruleset-maintenance-and-evolution.md`)*

## 5. 工具使用偏好

*   **文件编辑：**
    *   对于小范围、目标明确的修改，优先使用 `replace_in_file` 工具。
    *   仅在创建新文件、完全重写文件内容或进行大规模结构调整时使用 `write_to_file` 工具。
*   **命令执行：**
    *   执行命令前，Cline 应提供清晰的命令说明，解释其功能和潜在影响。
    *   需考虑命令的执行上下文（如当前工作目录、目标执行目录）。
